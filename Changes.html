<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html> <head>
<title>Change log for RCurl</title>
</head>

<body>


<h2>0.9-5</h2>

<dl>

  <dt>
  <li> Added getBinaryURL() function as a convenience for downloading
       binary files.  Binary content from POSTing or GETing forms
       can be done by mimicing the few curl settings illustrated
       in getBinaryURL(). 
  <dd>
  <dt>
  <li> Slightly improved error messages when unnamed options are passed
    to curlOptions().
  <dd>

  <dt>
  <li> getForm() and postForm() now issue a warning if a curl option
       appears in the parameters for the form.
       This can be legitimate if the form happens to use a parameter
       with the same name as a curl option (see listCurlOptions())
      and the error message can be silenced by explicitly providing
       a value for the .opts parameter in the call.
       The value can be list() or some actual curl options;
       the point is to indicate in the call that you have considered
       the parameters and the curl options.
  <dd>

  <dt>
  <li> The 'statusMessage' field of the HTTP header now contains
       the entire error message rather than the first word.
       Thanks to Valerie Obenchain for identifying the problem.
      
  <dd>

  <dt>
  <li>  Errors from HTTP requests now have their own class and use the
        condition system in R (see tryCatch(), simpleError, etc.).
        The names of these error classes come from the HTTP
        specification and are gathered programmatically from the
        specification document. (See inst/HTTPErrors/).
        Unknown/non-matching error status values return a
        GenericHTTPError class. The others return a vector of class
        names containing a more specific class name (whose name is the
        status number) and the more general "HTTPError" class name.
      
      
     
  <dd>
</dl>

<h2>0.9-4</h2>

<dl>
  <dt>
  <li> Fix escaping in the split string  used in
       findHTTPHeaderEncoding which gave rise to warnings about vector
       lengths in an if() condition in getEncoding().
  <dd>
</dl>

<h2>0.9-3</h2>
<dl>
  <dt>
  <li>  Changes to remove some simple compiler warnings.
  <dd>
</dl>

<h2>0.9-2</h2>
<dl>

  <dt>
  <li> Fix for base64() computing whether to encode or not incorrectly
       due to lazy evaluation.
  <dd>
  
  <dt>
  <li>  Now we use the base64 encode and decode routines from the
      libcurl distribution   with our own names on the routines to avoid synchronization problems.
  <dd>

  <dt>
  <li> Fix in chunkToLineReader to report number of "characters" read
       and warning emitted in C code if full number of "characters"
       not consumed.
  <dd>
</dl>

<h2>0.9-1</h2>
<dl>
  <dt> Configuration-time check to see if Curl_base64_encode() in
       libcurl (unexported) has the  new additional parameter and so requires us to use that..
  <dd>
</dl>

<h2>0.9-0</h2>
<dl>

  <dt>
  <li> Moved the tests/ directory to inst/examples/.
  <dd> This has some quite rich/advanced examples that should be
      available to people and also take some time to run during R CMD
      check.
      
  <dt>
  <li> Allow for an .encoding parameter in getURL()/getURI() for
       explicitly specifying the encoding of the response from the HTTP.
  <dd>
  <dt>
  <li> A mechanism that reads the HTTP response header and finds the
       Content-Type field and attempts to infer the encoding of the response.
      
  <dd> Note that this registers a handler routine for processing the
       header. This continues to work when an R function is provided as
       for the  headerfunction option, but will not work correctly
       if a routine is provided for the headerfunction option.
      
  <dt>
  <li> Updates to deal with encoding of strings.
  <dd> The basic text gathering function (used as the argument for
       write and the curl option writefunction) returns
       <code>nchar(, "bytes")</code> which may be more than the number
       of characters in an encoded string. 
      
  <dt>
  <li> Replaced internal calls to allocString() with mkCharLenCE() when
       available (i.e. R >= 2.8.0), or explicitly copy the string given
       to us from libcurl and create an encoded character string.
  <dd>

      
</dl>


<h2>0.8-3</h2>
<dl>
  <dt>
  <li> Support for CURLOPT_POST and using
      application/x-www-form-urlencoded as the Content-Type in
      POST'ing a form. This is controlled via the style parameter in postForm.
  <dd>  
  <dt>
  <li> Construct body of a form-urlencoded POST in R with the relevant  escaping.
  <dd>

</dl>



<h2>0.8-1</h2>
<dl>
  <dt>
  <li> Added code to support the new hashing of strings in R-devel
      (for what will be 2.6.0).
  <dd>

  <dt>
  <li> Bug fix which caused segmentation faults when external pointer
      objects were used as options for curl.
  <dd>
  <dt>
  <li> Allow dynamic symbol lookup in the RCurl DLL/SO to permit the
      use of routines such as R_curl_write_binary_data.
  <dd>
</dl>

<h2>0.7-0</h2>
 <dl>
  <dt>
  <li> Added support for base64 encoding and decoding using the code from libcurl
    (copyright
  <dd> See the file COPYING.
 </dl>

<h2>0.7-0</h2>
<dl>
  <dt>
  <li>  Added mechanism and example for reading binary data from a request.
  <dd>  This is not connected to R's connection mechanism as the API
        for that is not public and external extensions (i.e. via
        packages) are not feasible. (R's internals are not object
        oriented; one must work through the interpreted language even if
        working directly in compiled languages.)
       <p/>
       This is useful for handling gzip/bzip2 files, images, etc.
       To uncompress such in-memory data directly, see the
      Rcompression package.

  <dt>
  <li> fileUpload() function and mechanism for specifying details
       about a file whose contents are to be  included in a form
       submission via postForm.
  <dd>
       
</dl>

<h2>0.6-4</h2>

<dl>
  <dt>
  <li>  Fix the problem identified by Seth Falcon of
        releasing/free'ing an R function object in the RCurl memory
        management.
  <dd>  Added a type to the RCurlMemory structure so we know when we
        should R_Release() an object. Probably will also duplicate
        such functions when preserving them.
</dl>


<h2>0.6-3</h2>
<dl>

  <dt>
   Introduced mechanism for converting options to target types, including enumerated values.
  <dd> Works for netrc option and extensible for any of the values.


  <dt> Added support for specifying an R function or C routine
       for the SSL_CTX_FUNCTION option.
  <dd>

  <dt> Accept a logical value from the R function used for the write
    callback.  FALSE indicates an error and TRUE means that the
    function processed the text successfully.
  <dd>

  <dt> Fixed bug in memory management and garbage collection of the
       curl handles.
  <dd>
      
</dl>

<h2>0.6-2</h2>
<dl>
  <dt> Further changes re postForm() with a curl handle provided.
  <dd> Problem was NULL for httppost setting.
</dl>

<h2>0.6-1</h2>
<dl>
  <dt> Fixed type in postForm() that caused error when a curl handle
    was specified.
  <dd>  Name matching in ... of curlSetOpt() caught the cur which
    should have been curl.
      Thanks to Jim McDonal for catching this one and using the
      curl handle mechanism for repeated calls.
</dl>



<h2>0.6-0</h2>

<dl>
  <dt>
  <li>  Allow C routines to be passed as values for the CURL options
       that can be R functions.  Use
      <code>getNativeSymbolInfo(routine, package)$address</code>
       to identify the routine.
  <dd>

  <dt>
  <li> Support for concurrent, asynchronous HTTP requests using the
     curl_multi interface.</li>
  <dd>  See the examples in tests/
       or on the Web:
    <ul>
      <li><a href="concurrent.html">concurrent</a>  </li>            
      <li><a href="nestedHTML.html">nestedHTML</a>  </li>
      <li><a href="xmlParse.html">xmlParse</a>  </li>
    </ul>

</dl>

<h2>0.5-3</h2>
<dl>
  <dt>
    <li>Fixed the SSL example in getURL to turn off verification of
    the peer, i.e.
   <pre>
getURL('https://sourceforge.net', ssl.verifypeer = FALSE)
   </pre></li>
  <dd>
</dl>


<h2>0.5-2</h2>
<dl>
  <dt> Fix for R-devel and counting of \0's in strings for the length.
  <dd>
</dl>


<h2>0.5-1</h2>
<dl>
  <dt> When POSTing a form, only the first string in each element 
       of the list was written to the body of the form. In other
      words, multi-valued elements such as for checkboxes with several
      elements selected were mishandled.
  <dd> 
</dl>


<h2>0.5-0</h2>
<dl>
  <dt> Internal correction for passing numbers as options.
  <dd>  Manifested itself with progress function not being called.

</dl>


<h2>0.4-0</h2>

<dl>
  <dt>
  <li> Use the return value from a CURLOPT_WRITEFUNCTION
  <dd> This allows the user to raise an error.

  <dt>
  <li> Support the CURLOPT_PROGRESSFUNCTION
  <dd>

  <dt>
  <li> CURL_CFLAGS and CURL_LIBS computed in configure so as to handle
      no-GNU versions of make.
  <dd>

 </dl>

<h2>0.3-0</h2>
<dl>
  <dt> Ensure that parameters for postForm are a list when passed to
      C code.
  <dd>
</dl>


<hr>
<address><a href="http://www.stat.ucdavis.edu/~duncan">Duncan Temple Lang</a>
<a href=mailto:duncan@wald.ucdavis.edu>&lt;duncan@wald.ucdavis.edu&gt;</a></address>
<!-- hhmts start -->
Last modified: Sat Sep 27 11:02:53 PDT 2008
<!-- hhmts end -->
</body> </html>
